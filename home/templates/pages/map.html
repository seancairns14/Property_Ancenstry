<!-- map.html -->
{% extends "pages/base.html" %}

{% block title %}Map{% endblock %}

{% block content %}
<div id="map-container" style="width: 100vw; height: 100vh;">
    <!-- Map will render here -->
</div>

<!-- Include Leaflet.js libraries only if not included in the base.html -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
    // Initialize Leaflet map
    const map = L.map('map-container').setView([40.730610, -73.935242], 12); // New York coordinates example

    // Add OpenStreetMap tile layer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Add a marker with a popup
    L.marker([40.730610, -73.935242]).addTo(map)
        .bindPopup('A marker in NYC.')
        .openPopup();

    // Add new markers on map click
    function onMapClick(e) {
        L.marker([e.latlng.lat, e.latlng.lng]).addTo(map)
            .bindPopup("New Marker at " + e.latlng.toString())
            .openPopup();
    }
    map.on('click', onMapClick);
</script>
{% endblock %}
